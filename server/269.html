
 <!DOCTYPE HTML>
<html lang="zh-cn">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  
    <title>Ubuntu / Debian 安装 配置 LNMP环境 Nginx PHP7 MySQL MongoDB | Jeay&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Jeay">
    

    
    <meta name="description" content="切换root用户1sudo su 也可以用非root用户操作：以下的每一个命令前加 sudo 更新软件源1apt update -y 如果你想升级下服务器上的软件，在执行完apt update -y后可以再执行下apt upgrade -y 安装 MySQL1apt install -y mysql-server 安装过程中会提示  New password for the MySQL “root">
<meta name="keywords" content="运维,php7,ubuntu,nginx,lnmp">
<meta property="og:type" content="article">
<meta property="og:title" content="Ubuntu &#x2F; Debian 安装 配置 LNMP环境 Nginx PHP7 MySQL MongoDB">
<meta property="og:url" content="https://www.jeay.net/server/269.html">
<meta property="og:site_name" content="Jeay&#39;s blog">
<meta property="og:description" content="切换root用户1sudo su 也可以用非root用户操作：以下的每一个命令前加 sudo 更新软件源1apt update -y 如果你想升级下服务器上的软件，在执行完apt update -y后可以再执行下apt upgrade -y 安装 MySQL1apt install -y mysql-server 安装过程中会提示  New password for the MySQL “root">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2020-02-27T06:15:56.893Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ubuntu &#x2F; Debian 安装 配置 LNMP环境 Nginx PHP7 MySQL MongoDB">
<meta name="twitter:description" content="切换root用户1sudo su 也可以用非root用户操作：以下的每一个命令前加 sudo 更新软件源1apt update -y 如果你想升级下服务器上的软件，在执行完apt update -y后可以再执行下apt upgrade -y 安装 MySQL1apt install -y mysql-server 安装过程中会提示  New password for the MySQL “root">

    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/app.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/app.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>
</html>
  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Jeay&#39;s blog">Jeay&#39;s blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives/">Archives</a></li>
					
						<li><a href="/categories/tools/">Tools</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:www.jeay.net">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/server/269.html" title="Ubuntu / Debian 安装 配置 LNMP环境 Nginx PHP7 MySQL MongoDB" itemprop="url">Ubuntu / Debian 安装 配置 LNMP环境 Nginx PHP7 MySQL MongoDB</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Jeay" target="_blank" itemprop="author">Jeay</a>
		
  <p class="article-time">
    <time datetime="2017-05-02T09:31:59.000Z" itemprop="datePublished"> Published 2017-05-02</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#切换root用户"><span class="toc-number">1.</span> <span class="toc-text">切换root用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更新软件源"><span class="toc-number">2.</span> <span class="toc-text">更新软件源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装-MySQL"><span class="toc-number">3.</span> <span class="toc-text">安装 MySQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装-Nginx和PHP"><span class="toc-number">4.</span> <span class="toc-text">安装 Nginx和PHP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装MongoDB及php-mongodb扩展"><span class="toc-number">5.</span> <span class="toc-text">安装MongoDB及php-mongodb扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置MySQL数据储存路径"><span class="toc-number">6.</span> <span class="toc-text">配置MySQL数据储存路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置Nginx和PHP"><span class="toc-number">7.</span> <span class="toc-text">配置Nginx和PHP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#为php做一个专门的配置文件"><span class="toc-number">7.1.</span> <span class="toc-text">为php做一个专门的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为TP5做一个专门配置"><span class="toc-number">7.2.</span> <span class="toc-text">为TP5做一个专门配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为网站文件创建目录并建立软链接"><span class="toc-number">7.3.</span> <span class="toc-text">为网站文件创建目录并建立软链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为网站文件创建目录"><span class="toc-number">7.4.</span> <span class="toc-text">为网站文件创建目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加虚拟主机"><span class="toc-number">7.5.</span> <span class="toc-text">添加虚拟主机</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#phpMyAdmin"><span class="toc-number">8.</span> <span class="toc-text">phpMyAdmin</span></a></li></ol>
		
		</div>
		
		<h2 id="切换root用户"><a href="#切换root用户" class="headerlink" title="切换root用户"></a>切换root用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure>
<p>也可以用非root用户操作：以下的每一个命令前加 <code>sudo</code></p>
<h2 id="更新软件源"><a href="#更新软件源" class="headerlink" title="更新软件源"></a>更新软件源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update -y</span><br></pre></td></tr></table></figure>
<p>如果你想升级下服务器上的软件，在执行完<code>apt update -y</code>后可以再执行下<code>apt upgrade -y</code></p>
<h2 id="安装-MySQL"><a href="#安装-MySQL" class="headerlink" title="安装 MySQL"></a>安装 MySQL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y mysql-server</span><br></pre></td></tr></table></figure>
<p>安装过程中会提示</p>
<blockquote>
<p>New password for the MySQL “root” user:</p>
</blockquote>
<p>设置<code>MySQL</code>的<code>root</code>用户密码</p>
<p>输入完一次后还要重复输入确认一次</p>
<p>注意：必须包含数字、大小写字母部分版本还需要包含特殊字符（！@#￥%&amp;^等等）</p>
<ul>
<li><em>可以点击这里<a href="/php/58.html">生成随机字符串</a></em></li>
</ul>
<p><em>如果没有提示输入密码</em>，root密码将会被设置为空、且不能修改，运行<code>cat /etc/mysql/debian.cnf</code>可以看到系统分配的用户名和密码，可以使用它来登陆mysql；添加一个新的管理员账户<code>admin</code> 就可以使用了，这一步可以在phpmyadmin装好后在phpmyadmin里添加</p>
<h2 id="安装-Nginx和PHP"><a href="#安装-Nginx和PHP" class="headerlink" title="安装 Nginx和PHP"></a>安装 Nginx和PHP</h2><blockquote>
<p>PHP5.6、7.0、7.1即将停止更新，<a href="http://php.net/supported-versions.php" target="_blank" rel="noopener">详情查看这里</a></p>
</blockquote>
<p><em>最近新购的ubuntu18都已经默认为php7.2，直接安装7.0会报错</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装nginx</span></span><br><span class="line">apt install -y nginx</span><br><span class="line"><span class="comment"># 安装php7.2</span></span><br><span class="line">apt install -y php7.2 php7.2-fpm</span><br><span class="line"><span class="comment"># 安装一些常用php扩展</span></span><br><span class="line">apt install php7.2-mysql php7.2-sqlite3 php7.2-curl php7.2-gd php7.2-mbstring php7.2-json</span><br></pre></td></tr></table></figure>
<blockquote>
<p>mcrypt 在7.0以上版本已经被移除了，所以如果安装php7.2-mcrypt会提示找不到</p>
</blockquote>
<p><strong>上一步报错提示找不到7.2的解决方法：</strong></p>
<p>还没有php7.2的源，所以安装php7.2会提示找不到，先进行源的添加：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装软件源添加工具：</span></span><br><span class="line">apt -y install software-properties-common apt-transport-https lsb-release ca-certificates</span><br><span class="line"><span class="comment"># 添加 Ondřej Surý 的 PHP PPA 源，需要按一次回车：</span></span><br><span class="line">add-apt-repository ppa:ondrej/php  </span><br><span class="line"><span class="comment"># 更新软件源缓存：</span></span><br><span class="line">apt update</span><br></pre></td></tr></table></figure>
<p><em>注意： 需要哪些PHP扩展主要看自己的业务需求，如果比如你还会用到<code>memcache</code>、<code>redis</code>可以这样安装:</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装memcache redis扩展</span></span><br><span class="line">apt install php-memcached php-redis</span><br></pre></td></tr></table></figure>
<p><strong>到这一步，<code>LNMP</code>环境安装完成了，下面介绍的<code>MongoDB</code>和<code>MySQL</code>修改路径 根据实际需要选择</strong></p>
<h2 id="安装MongoDB及php-mongodb扩展"><a href="#安装MongoDB及php-mongodb扩展" class="headerlink" title="安装MongoDB及php-mongodb扩展"></a>安装MongoDB及php-mongodb扩展</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 mongodb</span></span><br><span class="line">apt install mongodb</span><br><span class="line"><span class="comment"># 安装PHP扩展php-mongodb</span></span><br><span class="line">apt install php-mongodb</span><br></pre></td></tr></table></figure>
<h2 id="配置MySQL数据储存路径"><a href="#配置MySQL数据储存路径" class="headerlink" title="配置MySQL数据储存路径"></a>配置MySQL数据储存路径</h2><p><strong>如果有两块以上的硬盘，可以设置一下MySQL数据的储存路径，如果只有系统盘，这一步配置可以跳过了</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service mysql stop</span><br><span class="line">vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure>
<p>找到<code>datadir = /var/lib/mysql</code></p>
<p>修改成其他硬盘挂载的位置，如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">datadir = /data/db/mysql</span><br></pre></td></tr></table></figure>
<p><code>:wq</code> 保存&amp;退出<br>复制<code>mysql</code>以前的数据到新目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果db目录还不存在，你需要自己创建好</span></span><br><span class="line">mkdir /data/db</span><br><span class="line">chmod 777 /data/db</span><br><span class="line"><span class="comment"># 复制mysql以前的数据到新目录</span></span><br><span class="line">cp -r -p /var/lib/mysql  /data/db/</span><br><span class="line"><span class="comment"># 修改文件:</span></span><br><span class="line">vim /etc/apparmor.d/usr.sbin.mysqld</span><br></pre></td></tr></table></figure>
<p>找到<code># Allow data dir access</code>这行</p>
<p>下面添加两行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/data/db/mysql/ r,</span><br><span class="line">/data/db/mysql/** rwk,</span><br></pre></td></tr></table></figure>
<p>保存退出后，重新加载<code>apparmor</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service  apparmor  reload</span><br></pre></td></tr></table></figure>
<p>启动<code>mysql</code>服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br></pre></td></tr></table></figure>
<p>参考文章：<a href="/server/34.html">CentOS修改mysql数据存储位置</a></p>
<h2 id="配置Nginx和PHP"><a href="#配置Nginx和PHP" class="headerlink" title="配置Nginx和PHP"></a>配置Nginx和PHP</h2><p>打开<code>nginx</code>配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>
<p>修改默认首页</p>
<p>在<code># Virtual Host Configs</code>下面，添加内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index index.htm index.html Index.html index.php;</span><br></pre></td></tr></table></figure>
<p>开启gzip</p>
<p>在<code>gzip on;</code>这行下面，替换内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gzip on;</span><br><span class="line">gzip_disable <span class="string">"msie6"</span>;</span><br><span class="line">gzip_vary on;</span><br><span class="line">gzip_min_length 1k;</span><br><span class="line">gzip_comp_level 2;</span><br><span class="line">gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript font/ttf font/otf image/svg+xml;</span><br></pre></td></tr></table></figure>
<h3 id="为php做一个专门的配置文件"><a href="#为php做一个专门的配置文件" class="headerlink" title="为php做一个专门的配置文件"></a>为php做一个专门的配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/php.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">    <span class="attribute">include</span> snippets/fastcgi-php.conf;</span><br><span class="line">    <span class="attribute">include</span> fastcgi_params;</span><br><span class="line">    <span class="attribute">fastcgi_pass</span> unix:/run/php/php7.2-fpm.sock;</span><br><span class="line">    <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以下内容非必要！</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#禁止.htaccess</span></span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ /\.ht</span> &#123;</span><br><span class="line">     <span class="attribute">deny</span>  all;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#禁止wordpress目录</span></span><br><span class="line"><span class="attribute">if</span> ( <span class="variable">$request_uri</span> <span class="regexp">~*  "^/wp-.*$")</span>&#123;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">403</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="为TP5做一个专门配置"><a href="#为TP5做一个专门配置" class="headerlink" title="为TP5做一个专门配置"></a>为TP5做一个专门配置</h3><p>最近ThinkPHP5用的比较多</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/tp5.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Only for ThinkPHP5</span></span><br><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">    <span class="attribute">index</span>    index.html index.php;</span><br><span class="line">    <span class="attribute">if</span> ( -f <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">if</span> ( !-e <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^(.*)$</span> /index.php?s=/<span class="variable">$1</span> <span class="literal">last</span>;</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">    <span class="attribute">include</span> snippets/fastcgi-php.conf;</span><br><span class="line">    <span class="attribute">include</span> fastcgi_params;</span><br><span class="line">    <span class="attribute">fastcgi_pass</span> unix:/run/php/php7.0-fpm.sock;</span><br><span class="line">    <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="为网站文件创建目录并建立软链接"><a href="#为网站文件创建目录并建立软链接" class="headerlink" title="为网站文件创建目录并建立软链接"></a>为网站文件创建目录并建立软链接</h3><p>(有数据盘,挂载在/data为例)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data/www</span><br><span class="line"><span class="comment"># 为了操作方便，在/下建立网站目录的软链接</span></span><br><span class="line">ln -s /data/www /wwwroot</span><br></pre></td></tr></table></figure>
<h3 id="为网站文件创建目录"><a href="#为网站文件创建目录" class="headerlink" title="为网站文件创建目录"></a>为网站文件创建目录</h3><p>(没有数据盘)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /wwwroot</span><br></pre></td></tr></table></figure>
<h3 id="添加虚拟主机"><a href="#添加虚拟主机" class="headerlink" title="添加虚拟主机"></a>添加虚拟主机</h3><p>添加虚拟主机 就是在<code>/etc/nginx/sites-available/</code>中创建网站配置文件 并软链接到<code>/etc/nginx/sites-enabled/</code></p>
<p>这里以<code>test</code>为例子:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/sites-available/<span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<p>添加以下内容</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>              <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>         www.test.com test.com;</span><br><span class="line">    <span class="attribute">root</span>                /wwwroot/test;</span><br><span class="line">    <span class="attribute">include</span>      php.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /etc/nginx/sites-available/<span class="built_in">test</span> /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure>
<p><code>ln</code> 用来创建链接 <code>-s</code>参数表示软连接 并没有创建实际的文件内容 仅仅是一个映射的关系<br><code>-s</code> 后面的参数分别是 <code>源路径</code> <code>目标路径</code><br>如果<code>目标路径</code>是一个目录，<code>源路径</code>是一个文件，会自动在目标路径下创建<code>源路径</code>相同的文件</p>
<p>测试，输出一下phpinfo试试吧</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建网站根目录，这里和上面`/etc/nginx/sites-available/test`里的`root`路径对应</span></span><br><span class="line">mkdir /wwwroot/<span class="built_in">test</span>/</span><br><span class="line"><span class="comment"># 创建网站首页</span></span><br><span class="line">vim /wwwroot/<span class="built_in">test</span>/index.php</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    phpinfo();</span><br></pre></td></tr></table></figure>
<p>如果你自己有域名的话可以用真实的域名测试。因为刚刚设置的是<code>test.com</code>这个测试域名，所以只能改本机的<code>host</code>文件了:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务器的公网IP  www.test.com test.com</span><br></pre></td></tr></table></figure>
<h2 id="phpMyAdmin"><a href="#phpMyAdmin" class="headerlink" title="phpMyAdmin"></a>phpMyAdmin</h2><p>先切换到/tmp目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp</span><br></pre></td></tr></table></figure>
<p>打开<a href="https://www.phpmyadmin.net/" target="_blank" rel="noopener">phpMyAdmin</a>官网，找到下载（Download），右键复制链接地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载</span></span><br><span class="line">wget 【右键粘贴刚刚复制的内容】</span><br><span class="line"><span class="comment"># 例如刚刚复制的是：https://files.phpmyadmin.net/phpMyAdmin/4.8.3/phpMyAdmin-4.8.3-all-languages.zip</span></span><br><span class="line"><span class="comment"># 后面也以这个文件（phpMyAdmin-4.8.3-all-languages.zip）为例 注意自己的文件名</span></span><br></pre></td></tr></table></figure>
<p>解压，如果你还没有安装<code>unzip</code>，需要先安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装unzip</span></span><br><span class="line">apt install unzip</span><br><span class="line"><span class="comment"># 解压刚刚下载的压缩包，注意文件名</span></span><br><span class="line">unzip phpMyAdmin-4.8.3-all-languages.zip</span><br><span class="line"><span class="comment"># 创建phpMyAdmin目录</span></span><br><span class="line">mkdir /wwwroot/pub</span><br><span class="line">mkdir /wwwroot/pub/phpmyadmin</span><br><span class="line"><span class="comment"># 移动下载的phpmyadmin到网站目录，注意文件名</span></span><br><span class="line">cp -r /tmp/phpMyAdmin-4.8.3-all-languages/* /wwwroot/pub/phpmyadmin</span><br><span class="line"><span class="comment"># 更改用户和权限</span></span><br><span class="line">chown -R www-data:www-data /wwwroot/pub/phpmyadmin</span><br><span class="line">chmod -R 755 /wwwroot/pub/phpmyadmin</span><br></pre></td></tr></table></figure>
<p>修改虚拟主机配置，添加<code>phpmyadmin</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/sites-available/phpmyadmin</span><br></pre></td></tr></table></figure>
<p>添加以下内容</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>              <span class="number">8088</span>;</span><br><span class="line">    <span class="attribute">root</span>                /wwwroot/pub/phpmyadmin;</span><br><span class="line">    <span class="attribute">include</span>      php.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加软链接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /etc/nginx/sites-available/phpmyadmin /etc/nginx/sites-enabled/phpmyadmin</span><br></pre></td></tr></table></figure>
<p>重新载入<code>nginx</code>配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service nginx reload</span><br></pre></td></tr></table></figure>
<p>访问 服务器ip:8088试一试吧<br>参考文章<a href="/server/143.html">Linux上phpMyAdmin怎么安装</a></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/server/">server</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/运维/">运维</a><a href="/tags/php7/">php7</a><a href="/tags/ubuntu/">ubuntu</a><a href="/tags/nginx/">nginx</a><a href="/tags/lnmp/">lnmp</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	<div class="share-jiathis">
	  
<div class="jiathis_style_24x24">
	<a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_googleplus"></a>
  <a class="jiathis_button_twitter"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
    var jiathis_config={
    data_track_clickback:true,
    sm:"copy,renren,cqq",
    pic:"",
    summary:"",
     ralateuid:{"tsina":"2470076427"},hideMore:false}
    
  </script> 
<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=
2143304" charset="utf-8"></script>      

	 </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/server/272.html" title="解决Linux下中文文件乱码，无法下载">
  <strong>上一篇：</strong><br/>
  <span>
  解决Linux下中文文件乱码，无法下载</span>
</a>
</div>


<div class="next">
<a href="/server/239.html"  title="CentOS shadowsocks如何设置开机自启">
 <strong>下一篇：</strong><br/> 
 <span>CentOS shadowsocks如何设置开机自启
</span>
</a>
</div>

</nav>

	



<section id="comments" class="comment">

<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cyt0mqnuK'; 
var conf = 'prod_acb6164281284c13bf0f34dbe1d96c85'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#切换root用户"><span class="toc-number">1.</span> <span class="toc-text">切换root用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更新软件源"><span class="toc-number">2.</span> <span class="toc-text">更新软件源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装-MySQL"><span class="toc-number">3.</span> <span class="toc-text">安装 MySQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装-Nginx和PHP"><span class="toc-number">4.</span> <span class="toc-text">安装 Nginx和PHP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装MongoDB及php-mongodb扩展"><span class="toc-number">5.</span> <span class="toc-text">安装MongoDB及php-mongodb扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置MySQL数据储存路径"><span class="toc-number">6.</span> <span class="toc-text">配置MySQL数据储存路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置Nginx和PHP"><span class="toc-number">7.</span> <span class="toc-text">配置Nginx和PHP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#为php做一个专门的配置文件"><span class="toc-number">7.1.</span> <span class="toc-text">为php做一个专门的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为TP5做一个专门配置"><span class="toc-number">7.2.</span> <span class="toc-text">为TP5做一个专门配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为网站文件创建目录并建立软链接"><span class="toc-number">7.3.</span> <span class="toc-text">为网站文件创建目录并建立软链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为网站文件创建目录"><span class="toc-number">7.4.</span> <span class="toc-text">为网站文件创建目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加虚拟主机"><span class="toc-number">7.5.</span> <span class="toc-text">添加虚拟主机</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#phpMyAdmin"><span class="toc-number">8.</span> <span class="toc-text">phpMyAdmin</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/front/" title="front">front<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/js/" title="js">js<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/php/" title="php">php<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/server/" title="server">server<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/tools/" title="tools">tools<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/wordpress/" title="wordpress">wordpress<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/前端/" title="前端">前端<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/centos/" title="centos">centos<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/运维/" title="运维">运维<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/php/" title="php">php<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/apache/" title="apache">apache<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/前端/" title="前端">前端<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/包管理/" title="包管理">包管理<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/linux/" title="linux">linux<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/mysql/" title="mysql">mysql<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/javascript/" title="javascript">javascript<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/科学上网/" title="科学上网">科学上网<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/shadowsocks/" title="shadowsocks">shadowsocks<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/ubuntu/" title="ubuntu">ubuntu<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/服务器/" title="服务器">服务器<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/sass/" title="sass">sass<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/nodejs/" title="nodejs">nodejs<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/vscode/" title="vscode">vscode<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/composer/" title="composer">composer<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/服务器安全/" title="服务器安全">服务器安全<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/lamp/" title="lamp">lamp<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/编码/" title="编码">编码<sup>2</sup></a></li>
			
		
		</ul>
</div>


  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="https://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=2470076427&verifier=a4b7e708&dpc=1"></iframe>
</div>


  <div class="steam-card">
    <p class="asidetitle">
        Steam
    </p>
    <a href="https://steamcommunity.com/id/jeeaay/"><img src="https://steamsignature.com/card/0/76561198040942609.png"></a>
</div>

  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://www.jeay.net/php/58.html" target="_blank" title="生成随机字符串">生成随机字符串</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.jeay.net/js/install-nodejs.html" target="_blank" title="安装nodejs">安装nodejs</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.jeay.net/server/269.html" target="_blank" title="LNMP环境搭建">LNMP环境搭建</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.jeay.net/server/237.html" target="_blank" title="密钥登录配置">密钥登录配置</a>
            
          </li>
        
          <li>
            
            	<a href="https://blog.lmzg.org/2018/cerbot.html" target="_blank" title="Cerbot">Cerbot</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.londy.cc/" target="_blank" title="Londy">Londy</a>
            
          </li>
        
          <li>
            
            	<a href="https://blog.lmzg.org/" target="_blank" title="技术团队Blog">技术团队Blog</a>
            
          </li>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Talents come from diligence, <br/>
			and knowledge is gained by accumulation.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2470076427" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/jeeaay" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2020 
		
		<a href="/about" target="_blank" title="Jeay">Jeay</a>
		
		备案号：<a href="http://www.beian.miit.gov.cn/" rel="nofollow" target="_blank">豫ICP备16039722号</a>
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<div style="display:none">
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261897922'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s23.cnzz.com/z_stat.php%3Fid%3D1261897922' type='text/javascript'%3E%3C/script%3E"));</script>
</div>

<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
